/* ============================================================
   ЁЯХЙя╕П FallbackPinAccess.js (v16.3.2 тАУ ShaktiLock Mobile Secure Mode)
   ------------------------------------------------------------
   Purpose  : рдЬрдм рдлрд┐рдВрдЧрд░рдкреНрд░рд┐рдВрдЯ рд╕рддреНрдпрд╛рдкрди рдЕрд╕рдлрд▓ рд╣реЛ, рддрдм 4-рдЕрдВрдХреАрдп рдкрд┐рди рд╕реЗ рд▓реЙрдЧрд┐рдиред
   Author   : SakhiVani Core тАв Guided by Guru Architect
   ============================================================ */

(function (global) {

  const FallbackPinAccess = {
    pinKey: "8565", // ЁЯМ╝ рдпрд╣рд╛рдБ рдЕрдкрдирд╛ 4-рдЕрдВрдХреАрдп PIN рдмрджрд▓ рд╕рдХрддреА рд╣реЛ
    pinVerified: false,

    // ЁЯФ╣ рдЬрдм рдлрд┐рдВрдЧрд░рдкреНрд░рд┐рдВрдЯ рдЕрд╕рдлрд▓ рд╣реЛ
    requestPinAccess() {
      const enteredPin = prompt("рдлрд┐рдВрдЧрд░рдкреНрд░рд┐рдВрдЯ рдЕрд╕рдлрд▓ рд╣реБрдЖред рдХреГрдкрдпрд╛ рдЕрдкрдирд╛ 4-рдЕрдВрдХреАрдп PIN рдбрд╛рд▓реЗрдВ:");
      if (enteredPin === this.pinKey) {
        this.pinVerified = true;
        localStorage.setItem("pinVerified", "true");
        alert("тЬЕ рдкрд┐рди рд╕рддреНрдпрд╛рдкрди рд╕рдлрд▓ тАФ рд╕рдЦрд┐рд╡рд╛рдгреА рдЕрдм рд╕рдХреНрд░рд┐рдп рд╣реИред");
        console.log("ЁЯМ╝ PIN Access Granted тАФ Guru Verified.");
      } else {
        alert("тЪая╕П рдЧрд▓рдд рдкрд┐рди тАФ рдХреГрдкрдпрд╛ рдкреБрдирдГ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВред");
        console.warn("тЭМ PIN Authentication Failed.");
      }
    },

    // ЁЯФ╕ рд╕рдЦрд┐рд╡рд╛рдгреА рдХреЗ рд▓реЙрдЧрд┐рди рдкреНрд░рд╛рд░рдВрдн рдореЗрдВ рдЬрд╛рдВрдЪ
    init() {
      const fingerprintStatus = localStorage.getItem("fingerprintVerified");
      if (fingerprintStatus !== "true") {
        console.log("тЪая╕П рдлрд┐рдВрдЧрд░рдкреНрд░рд┐рдВрдЯ рд╕рддреНрдпрд╛рдкрди рдЕрдиреБрдкрд▓рдмреНрдз тАФ PIN рдореЛрдб рд╕рдХреНрд░рд┐рдпред");
        this.requestPinAccess();
      } else {
        console.log("тЬЕ рдлрд┐рдВрдЧрд░рдкреНрд░рд┐рдВрдЯ рдкрд╣рд▓реЗ рд╕реЗ рд╕рддреНрдпрд╛рдкрд┐рдд рд╣реИред");
      }
    }
  };

})(window);
